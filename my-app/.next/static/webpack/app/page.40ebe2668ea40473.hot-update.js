"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./app/components/chat.jsx":
/*!*********************************!*\
  !*** ./app/components/chat.jsx ***!
  \*********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Chat; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _profile_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./profile.jsx */ \"(app-pages-browser)/./app/components/profile.jsx\");\n/* harmony import */ var _userContext_jsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../userContext.jsx */ \"(app-pages-browser)/./app/userContext.jsx\");\n/* harmony import */ var _barrel_optimize_names_TextField_mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! __barrel_optimize__?names=TextField!=!@mui/material */ \"(app-pages-browser)/./node_modules/@mui/material/TextField/TextField.js\");\n/* harmony import */ var _messages_jsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./messages.jsx */ \"(app-pages-browser)/./app/components/messages.jsx\");\n/* harmony import */ var _firebase_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../firebase.js */ \"(app-pages-browser)/./app/firebase.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n// \"use-client\"\n// import React, { useContext } from \"react\";\n// import Profile from \"./profile.jsx\";\n// import { UserContext, useUser } from \"../userContext.jsx\";\n// import { TextField } from \"@mui/material\";\n// import Messages from \"./messages.jsx\";\n// import PerfectScrollbar from 'react-perfect-scrollbar';\n// import 'react-perfect-scrollbar/dist/css/styles.css';\n// import { useEffect } from \"react\";\n// import { arrayUnion, doc, getDoc, updateDoc } from \"firebase/firestore\";\n// import { db } from \"../firebase.js\";\n// export default function(props) {\n//     const userContext = useUser();\n//     const [processedChats, setProcessedChats] = React.useState([]);\n//     const [user, setUser] = React.useState(userContext);\n//     const otherUser=props.otherUser;\n//     React.useEffect(() => {\n//         setUser(userContext);\n//     }, [userContext]);\n//     // const {user,setUser}=useContext(UserContext);\n//     async function getUserNameById(receiver) {\n//         try {\n//             // Reference to the document with the given userId in the \"users\" collection\n//             const userRef = doc(db, \"Users\", receiver);\n//             // Fetch the document\n//             const userDoc = await getDoc(userRef);\n//             if (userDoc.exists()) {\n//                 // Extract and return the user's name from the document data\n//                 const userData = userDoc.data();\n//                 console.log(userDoc.id);\n//                 const id = userDoc.id;\n//                 const name = userData.name;\n//                 const pic = userData.profilePicture;\n//                 const pair = {\"id\":id, \"name\": name, \"pic\": pic };\n//                 console.log(pic)\n//                 return pair;\n//             } else {\n//                 console.log(\"No such user!\");\n//                 return null;\n//             }\n//         } catch (error) {\n//             console.error(\"Error fetching user:\", error);\n//         }\n//     }\n//     const userId=props.userId;\n//     useEffect(() => {\n//         const modifyChats = async () => {\n//             try {\n//                 // Using Promise.all to handle async map operation\n//                 const updatedChats = await Promise.all(\n//                     props.chats.map(async (cont) => {\n//                         const receiverArray = cont.data.participants.filter(pid => pid !== userId);\n//                         const receiver = receiverArray[0]; // Assuming only one receiver\n//                         // Assuming getUserNameById is async and fetches the username\n//                         const pair = await getUserNameById(receiver);\n//                         // console.log(profilePic)\n//                         return { \"id\":pair.id,\"name\": pair.name, \"chat\": cont.chat, \"profilePic\": pair.pic };\n//                     })\n//                 );\n//                 // Update the state with modified chats\n//                 setProcessedChats(updatedChats);\n//             } catch (error) {\n//                 console.error(\"Error modifying chats:\", error);\n//             }\n//         };\n//         modifyChats();\n//     }, [props.chats, props.userId]);\n//     const [currDisplayUser,setCurrDisplayUser]=React.useState(\"\");\n//     useEffect(() => {\n//         const getUser = async () => {\n//             try {\n//                 // Await the result of the async function getUserNameById\n//                 const updatedUser = await getUserNameById(props.profileId);\n//                 console.log(updatedUser);\n//                 // Set the fetched user as the current display user\n//                 setCurrDisplayUser(updatedUser);\n//             } catch (error) {\n//                 console.error(\"Error updating user:\", error);\n//             }\n//         };\n//         // Call the async function\n//         getUser();\n//     }, [props.profileId]); // Re-run the effect if profileId changes\n//     const [currMsg, setCurrMsg] = React.useState(\"\");\n//     function handleChange(event) {\n//         setCurrMsg(event.target.value);\n//     }\n//     function handleSubmit(e) {\n//         if(currMsg.length>0)\n//        { \n//         const temp = { \"msg\": currMsg, \"id\": userId };\n//         addMessageToChat(props.currChat,currMsg,userId);\n//         // setMessages(messages.concat(temp));\n//         setCurrMsg(\"\");\n//     }\n//     }\n//     async function addMessageToChat (chatId, messageText, senderId) {\n//         try {\n//             console.log(\"I am here\")\n//           // Reference to the specific chat document\n//           const chatRef = doc(db, \"Chats\", chatId);\n//           // Create the message object to be added\n//           const newMessage = {\n//             sender: senderId,\n//             msg: messageText,\n//             timestamp: new Date(), // Add timestamp if needed\n//           };\n//           // Update the chat document with the new message added to the messages array\n//           await updateDoc(chatRef, {\n//             chat: arrayUnion(newMessage), // Adds the new message to the messages array\n//           });\n//           console.log(\"Message added successfully!\");\n//         } catch (error) {\n//           console.error(\"Error adding message:\", error);\n//         }\n//       };\n//     function handleKeyDown(event) {\n//         if (event.key === \"Enter\")\n//             handleSubmit();\n//     }\n//     return (\n//         <div className=\"bg-slate-800 flex flex-col h-full p-1 m-1 rounded-md\">\n//             {console.log(processedChats)}\n//             {console.log(props.chats)}\n//             <Profile currDisplayUser={currDisplayUser} />\n//             {/* <PerfectScrollbar> */}\n//             {/* <h1>{props.currChat}</h1> */}\n//             <div className=\"flex-grow overflow-hidden\">\n//                 <Messages messages={messages} \n//                 userId={userId}\n//                     currChat={props.currChat}\n//                 />\n//             </div>\n//             {/* </PerfectScrollbar>  */}\n//             <div className=\"flex items-center gap-2 mt-auto p-2 bg-slate-700\">\n//                 <TextField \n//                     className=\"bg-slate-200 rounded-full w-full drop-shadow-md\" \n//                     id=\"outlined-basic\" \n//                     label=\"Message\"\n//                     value={currMsg}\n//                     variant=\"outlined\" \n//                     onChange={handleChange}\n//                     onKeyDown={handleKeyDown} \n//                 />\n//                 <button className=\"bg-green-500 rounded-full p-2 m-2\" onClick={handleSubmit}>\n//                     Send\n//                 </button>\n//             </div>\n//         </div>\n//     );\n// }\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\nfunction Chat(props) {\n    _s();\n    const userContext = (0,_userContext_jsx__WEBPACK_IMPORTED_MODULE_3__.useUser)();\n    const userId = props.userId;\n    const otherUser = props.otherUser;\n    const [currMsg, setCurrMsg] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [ws, setWs] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null); // WebSocket instance\n    const wsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null); // To keep track of the WebSocket instance\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Establish WebSocket connection when the component mounts\n        const socket = new WebSocket(\"ws://localhost:8080\");\n        wsRef.current = socket;\n        setWs(socket);\n        // Handle incoming messages from the server\n        socket.onmessage = (event)=>{\n            const message = JSON.parse(event.data);\n            // Add the new message to the state\n            setMessages((prevMessages)=>[\n                    ...prevMessages,\n                    message\n                ]);\n        };\n        // Clean up WebSocket connection when the component unmounts\n        return ()=>{\n            if (wsRef.current) {\n                wsRef.current.close();\n            }\n        };\n    }, []);\n    // Function to handle sending messages through WebSocket\n    function handleSubmit() {\n        if (currMsg.length > 0 && ws) {\n            const newMessage = {\n                userId: userId,\n                chatId: props.currChat,\n                msg: currMsg\n            };\n            // Send message to WebSocket server\n            ws.send(JSON.stringify(newMessage));\n            // Optionally, add the message to Firebase (asynchronous)\n            addMessageToChat(props.currChat, currMsg, userId);\n            setCurrMsg(\"\");\n        }\n    }\n    // Function to store the message in Firebase\n    async function addMessageToChat(chatId, messageText, senderId) {\n        try {\n            const chatRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.doc)(_firebase_js__WEBPACK_IMPORTED_MODULE_5__.db, \"Chats\", chatId);\n            const newMessage = {\n                sender: senderId,\n                msg: messageText,\n                timestamp: new Date()\n            };\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.updateDoc)(chatRef, {\n                chat: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.arrayUnion)(newMessage)\n            });\n            console.log(\"Message stored in Firebase!\");\n        } catch (error) {\n            console.error(\"Error adding message to Firebase:\", error);\n        }\n    }\n    function handleChange(event) {\n        setCurrMsg(event.target.value);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"chat-container\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_profile_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                currDisplayUser: otherUser\n            }, void 0, false, {\n                fileName: \"/home/akarsh/Desktop/Projects/Texter/my-app/app/components/chat.jsx\",\n                lineNumber: 256,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_messages_jsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                messages: messages,\n                userId: userId,\n                currChat: props.currChat\n            }, void 0, false, {\n                fileName: \"/home/akarsh/Desktop/Projects/Texter/my-app/app/components/chat.jsx\",\n                lineNumber: 257,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_TextField_mui_material__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                value: currMsg,\n                onChange: handleChange,\n                onKeyDown: (e)=>e.key === \"Enter\" && handleSubmit(),\n                placeholder: \"Type your message...\"\n            }, void 0, false, {\n                fileName: \"/home/akarsh/Desktop/Projects/Texter/my-app/app/components/chat.jsx\",\n                lineNumber: 258,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: handleSubmit,\n                children: \"Send\"\n            }, void 0, false, {\n                fileName: \"/home/akarsh/Desktop/Projects/Texter/my-app/app/components/chat.jsx\",\n                lineNumber: 264,\n                columnNumber: 13\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/akarsh/Desktop/Projects/Texter/my-app/app/components/chat.jsx\",\n        lineNumber: 255,\n        columnNumber: 9\n    }, this);\n}\n_s(Chat, \"mDZ0llgKXlWO6gK2WO5HBi4iv04=\", false, function() {\n    return [\n        _userContext_jsx__WEBPACK_IMPORTED_MODULE_3__.useUser\n    ];\n});\n_c = Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9jb21wb25lbnRzL2NoYXQuanN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxlQUFlO0FBRWYsNkNBQTZDO0FBQzdDLHVDQUF1QztBQUN2Qyw2REFBNkQ7QUFDN0QsNkNBQTZDO0FBQzdDLHlDQUF5QztBQUN6QywwREFBMEQ7QUFDMUQsd0RBQXdEO0FBQ3hELHFDQUFxQztBQUNyQywyRUFBMkU7QUFDM0UsdUNBQXVDO0FBRXZDLG1DQUFtQztBQUNuQyxxQ0FBcUM7QUFDckMsc0VBQXNFO0FBQ3RFLDJEQUEyRDtBQUMzRCx1Q0FBdUM7QUFDdkMsOEJBQThCO0FBQzlCLGdDQUFnQztBQUNoQyx5QkFBeUI7QUFDekIsdURBQXVEO0FBQ3ZELGlEQUFpRDtBQUNqRCxnQkFBZ0I7QUFDaEIsMkZBQTJGO0FBQzNGLDBEQUEwRDtBQUUxRCxvQ0FBb0M7QUFDcEMscURBQXFEO0FBRXJELHNDQUFzQztBQUN0QywrRUFBK0U7QUFDL0UsbURBQW1EO0FBQ25ELDJDQUEyQztBQUMzQyx5Q0FBeUM7QUFDekMsOENBQThDO0FBQzlDLHVEQUF1RDtBQUN2RCxxRUFBcUU7QUFDckUsbUNBQW1DO0FBQ25DLCtCQUErQjtBQUMvQix1QkFBdUI7QUFDdkIsZ0RBQWdEO0FBQ2hELCtCQUErQjtBQUMvQixnQkFBZ0I7QUFDaEIsNEJBQTRCO0FBQzVCLDREQUE0RDtBQUM1RCxZQUFZO0FBQ1osUUFBUTtBQUNSLGlDQUFpQztBQUNqQyx3QkFBd0I7QUFDeEIsNENBQTRDO0FBQzVDLG9CQUFvQjtBQUNwQixxRUFBcUU7QUFDckUsMERBQTBEO0FBQzFELHdEQUF3RDtBQUN4RCxzR0FBc0c7QUFDdEcsMkZBQTJGO0FBRTNGLHdGQUF3RjtBQUN4Rix3RUFBd0U7QUFDeEUscURBQXFEO0FBQ3JELGdIQUFnSDtBQUNoSCx5QkFBeUI7QUFDekIscUJBQXFCO0FBRXJCLDBEQUEwRDtBQUMxRCxtREFBbUQ7QUFDbkQsZ0NBQWdDO0FBQ2hDLGtFQUFr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V0FBVyxDQUFDQyxJQUFNQSxFQUFFQyxHQUFHLEtBQUssV0FBVzVCO2dCQUN2QzZCLGFBQVk7Ozs7OzswQkFFaEIsOERBQUNDO2dCQUFPQyxTQUFTL0I7MEJBQWM7Ozs7Ozs7Ozs7OztBQUczQztHQXRGd0J2Qjs7UUFDQVAscURBQU9BOzs7S0FEUE8iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vYXBwL2NvbXBvbmVudHMvY2hhdC5qc3g/ZDg5YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBcInVzZS1jbGllbnRcIlxuXG4vLyBpbXBvcnQgUmVhY3QsIHsgdXNlQ29udGV4dCB9IGZyb20gXCJyZWFjdFwiO1xuLy8gaW1wb3J0IFByb2ZpbGUgZnJvbSBcIi4vcHJvZmlsZS5qc3hcIjtcbi8vIGltcG9ydCB7IFVzZXJDb250ZXh0LCB1c2VVc2VyIH0gZnJvbSBcIi4uL3VzZXJDb250ZXh0LmpzeFwiO1xuLy8gaW1wb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcIkBtdWkvbWF0ZXJpYWxcIjtcbi8vIGltcG9ydCBNZXNzYWdlcyBmcm9tIFwiLi9tZXNzYWdlcy5qc3hcIjtcbi8vIGltcG9ydCBQZXJmZWN0U2Nyb2xsYmFyIGZyb20gJ3JlYWN0LXBlcmZlY3Qtc2Nyb2xsYmFyJztcbi8vIGltcG9ydCAncmVhY3QtcGVyZmVjdC1zY3JvbGxiYXIvZGlzdC9jc3Mvc3R5bGVzLmNzcyc7XG4vLyBpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbi8vIGltcG9ydCB7IGFycmF5VW5pb24sIGRvYywgZ2V0RG9jLCB1cGRhdGVEb2MgfSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG4vLyBpbXBvcnQgeyBkYiB9IGZyb20gXCIuLi9maXJlYmFzZS5qc1wiO1xuXG4vLyBleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihwcm9wcykge1xuLy8gICAgIGNvbnN0IHVzZXJDb250ZXh0ID0gdXNlVXNlcigpO1xuLy8gICAgIGNvbnN0IFtwcm9jZXNzZWRDaGF0cywgc2V0UHJvY2Vzc2VkQ2hhdHNdID0gUmVhY3QudXNlU3RhdGUoW10pO1xuLy8gICAgIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IFJlYWN0LnVzZVN0YXRlKHVzZXJDb250ZXh0KTtcbi8vICAgICBjb25zdCBvdGhlclVzZXI9cHJvcHMub3RoZXJVc2VyO1xuLy8gICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4vLyAgICAgICAgIHNldFVzZXIodXNlckNvbnRleHQpO1xuLy8gICAgIH0sIFt1c2VyQ29udGV4dF0pO1xuLy8gICAgIC8vIGNvbnN0IHt1c2VyLHNldFVzZXJ9PXVzZUNvbnRleHQoVXNlckNvbnRleHQpO1xuLy8gICAgIGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJOYW1lQnlJZChyZWNlaXZlcikge1xuLy8gICAgICAgICB0cnkge1xuLy8gICAgICAgICAgICAgLy8gUmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB3aXRoIHRoZSBnaXZlbiB1c2VySWQgaW4gdGhlIFwidXNlcnNcIiBjb2xsZWN0aW9uXG4vLyAgICAgICAgICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCBcIlVzZXJzXCIsIHJlY2VpdmVyKTtcblxuLy8gICAgICAgICAgICAgLy8gRmV0Y2ggdGhlIGRvY3VtZW50XG4vLyAgICAgICAgICAgICBjb25zdCB1c2VyRG9jID0gYXdhaXQgZ2V0RG9jKHVzZXJSZWYpO1xuXG4vLyAgICAgICAgICAgICBpZiAodXNlckRvYy5leGlzdHMoKSkge1xuLy8gICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgYW5kIHJldHVybiB0aGUgdXNlcidzIG5hbWUgZnJvbSB0aGUgZG9jdW1lbnQgZGF0YVxuLy8gICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlckRvYy5kYXRhKCk7XG4vLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNlckRvYy5pZCk7XG4vLyAgICAgICAgICAgICAgICAgY29uc3QgaWQgPSB1c2VyRG9jLmlkO1xuLy8gICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB1c2VyRGF0YS5uYW1lO1xuLy8gICAgICAgICAgICAgICAgIGNvbnN0IHBpYyA9IHVzZXJEYXRhLnByb2ZpbGVQaWN0dXJlO1xuLy8gICAgICAgICAgICAgICAgIGNvbnN0IHBhaXIgPSB7XCJpZFwiOmlkLCBcIm5hbWVcIjogbmFtZSwgXCJwaWNcIjogcGljIH07XG4vLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocGljKVxuLy8gICAgICAgICAgICAgICAgIHJldHVybiBwYWlyO1xuLy8gICAgICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vIHN1Y2ggdXNlciFcIik7XG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4vLyAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgdXNlcjpcIiwgZXJyb3IpO1xuLy8gICAgICAgICB9XG4vLyAgICAgfVxuLy8gICAgIGNvbnN0IHVzZXJJZD1wcm9wcy51c2VySWQ7XG4vLyAgICAgdXNlRWZmZWN0KCgpID0+IHtcbi8vICAgICAgICAgY29uc3QgbW9kaWZ5Q2hhdHMgPSBhc3luYyAoKSA9PiB7XG4vLyAgICAgICAgICAgICB0cnkge1xuLy8gICAgICAgICAgICAgICAgIC8vIFVzaW5nIFByb21pc2UuYWxsIHRvIGhhbmRsZSBhc3luYyBtYXAgb3BlcmF0aW9uXG4vLyAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZENoYXRzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4vLyAgICAgICAgICAgICAgICAgICAgIHByb3BzLmNoYXRzLm1hcChhc3luYyAoY29udCkgPT4ge1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjZWl2ZXJBcnJheSA9IGNvbnQuZGF0YS5wYXJ0aWNpcGFudHMuZmlsdGVyKHBpZCA9PiBwaWQgIT09IHVzZXJJZCk7XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNlaXZlciA9IHJlY2VpdmVyQXJyYXlbMF07IC8vIEFzc3VtaW5nIG9ubHkgb25lIHJlY2VpdmVyXG5cbi8vICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFzc3VtaW5nIGdldFVzZXJOYW1lQnlJZCBpcyBhc3luYyBhbmQgZmV0Y2hlcyB0aGUgdXNlcm5hbWVcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhaXIgPSBhd2FpdCBnZXRVc2VyTmFtZUJ5SWQocmVjZWl2ZXIpO1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocHJvZmlsZVBpYylcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IFwiaWRcIjpwYWlyLmlkLFwibmFtZVwiOiBwYWlyLm5hbWUsIFwiY2hhdFwiOiBjb250LmNoYXQsIFwicHJvZmlsZVBpY1wiOiBwYWlyLnBpYyB9O1xuLy8gICAgICAgICAgICAgICAgICAgICB9KVxuLy8gICAgICAgICAgICAgICAgICk7XG5cbi8vICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHN0YXRlIHdpdGggbW9kaWZpZWQgY2hhdHNcbi8vICAgICAgICAgICAgICAgICBzZXRQcm9jZXNzZWRDaGF0cyh1cGRhdGVkQ2hhdHMpO1xuLy8gICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbi8vICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbW9kaWZ5aW5nIGNoYXRzOlwiLCBlcnJvcik7XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH07XG5cbi8vICAgICAgICAgbW9kaWZ5Q2hhdHMoKTtcbi8vICAgICB9LCBbcHJvcHMuY2hhdHMsIHByb3BzLnVzZXJJZF0pO1xuLy8gICAgIGNvbnN0IFtjdXJyRGlzcGxheVVzZXIsc2V0Q3VyckRpc3BsYXlVc2VyXT1SZWFjdC51c2VTdGF0ZShcIlwiKTtcbi8vICAgICB1c2VFZmZlY3QoKCkgPT4ge1xuLy8gICAgICAgICBjb25zdCBnZXRVc2VyID0gYXN5bmMgKCkgPT4ge1xuLy8gICAgICAgICAgICAgdHJ5IHtcbi8vICAgICAgICAgICAgICAgICAvLyBBd2FpdCB0aGUgcmVzdWx0IG9mIHRoZSBhc3luYyBmdW5jdGlvbiBnZXRVc2VyTmFtZUJ5SWRcbi8vICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkVXNlciA9IGF3YWl0IGdldFVzZXJOYW1lQnlJZChwcm9wcy5wcm9maWxlSWQpO1xuLy8gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHVwZGF0ZWRVc2VyKTtcbiAgICBcbi8vICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIGZldGNoZWQgdXNlciBhcyB0aGUgY3VycmVudCBkaXNwbGF5IHVzZXJcbi8vICAgICAgICAgICAgICAgICBzZXRDdXJyRGlzcGxheVVzZXIodXBkYXRlZFVzZXIpO1xuLy8gICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbi8vICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgdXNlcjpcIiwgZXJyb3IpO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9O1xuICAgIFxuLy8gICAgICAgICAvLyBDYWxsIHRoZSBhc3luYyBmdW5jdGlvblxuLy8gICAgICAgICBnZXRVc2VyKCk7XG4gICAgICAgIFxuLy8gICAgIH0sIFtwcm9wcy5wcm9maWxlSWRdKTsgLy8gUmUtcnVuIHRoZSBlZmZlY3QgaWYgcHJvZmlsZUlkIGNoYW5nZXNcbiAgICBcbiAgXG5cbi8vICAgICBjb25zdCBbY3Vyck1zZywgc2V0Q3Vyck1zZ10gPSBSZWFjdC51c2VTdGF0ZShcIlwiKTtcblxuLy8gICAgIGZ1bmN0aW9uIGhhbmRsZUNoYW5nZShldmVudCkge1xuLy8gICAgICAgICBzZXRDdXJyTXNnKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4vLyAgICAgfVxuXG4vLyAgICAgZnVuY3Rpb24gaGFuZGxlU3VibWl0KGUpIHtcbi8vICAgICAgICAgaWYoY3Vyck1zZy5sZW5ndGg+MClcbi8vICAgICAgICB7IFxuLy8gICAgICAgICBjb25zdCB0ZW1wID0geyBcIm1zZ1wiOiBjdXJyTXNnLCBcImlkXCI6IHVzZXJJZCB9O1xuLy8gICAgICAgICBhZGRNZXNzYWdlVG9DaGF0KHByb3BzLmN1cnJDaGF0LGN1cnJNc2csdXNlcklkKTtcbi8vICAgICAgICAgLy8gc2V0TWVzc2FnZXMobWVzc2FnZXMuY29uY2F0KHRlbXApKTtcbi8vICAgICAgICAgc2V0Q3Vyck1zZyhcIlwiKTtcbiAgICBcbi8vICAgICB9XG4vLyAgICAgfVxuLy8gICAgIGFzeW5jIGZ1bmN0aW9uIGFkZE1lc3NhZ2VUb0NoYXQgKGNoYXRJZCwgbWVzc2FnZVRleHQsIHNlbmRlcklkKSB7XG4vLyAgICAgICAgIHRyeSB7XG4vLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkkgYW0gaGVyZVwiKVxuLy8gICAgICAgICAgIC8vIFJlZmVyZW5jZSB0byB0aGUgc3BlY2lmaWMgY2hhdCBkb2N1bWVudFxuLy8gICAgICAgICAgIGNvbnN0IGNoYXRSZWYgPSBkb2MoZGIsIFwiQ2hhdHNcIiwgY2hhdElkKTtcbiAgICAgIFxuLy8gICAgICAgICAgIC8vIENyZWF0ZSB0aGUgbWVzc2FnZSBvYmplY3QgdG8gYmUgYWRkZWRcbi8vICAgICAgICAgICBjb25zdCBuZXdNZXNzYWdlID0ge1xuLy8gICAgICAgICAgICAgc2VuZGVyOiBzZW5kZXJJZCxcbi8vICAgICAgICAgICAgIG1zZzogbWVzc2FnZVRleHQsXG4vLyAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksIC8vIEFkZCB0aW1lc3RhbXAgaWYgbmVlZGVkXG4vLyAgICAgICAgICAgfTtcbiAgICAgIFxuLy8gICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgY2hhdCBkb2N1bWVudCB3aXRoIHRoZSBuZXcgbWVzc2FnZSBhZGRlZCB0byB0aGUgbWVzc2FnZXMgYXJyYXlcbi8vICAgICAgICAgICBhd2FpdCB1cGRhdGVEb2MoY2hhdFJlZiwge1xuLy8gICAgICAgICAgICAgY2hhdDogYXJyYXlVbmlvbihuZXdNZXNzYWdlKSwgLy8gQWRkcyB0aGUgbmV3IG1lc3NhZ2UgdG8gdGhlIG1lc3NhZ2VzIGFycmF5XG4vLyAgICAgICAgICAgfSk7XG4gICAgICBcbi8vICAgICAgICAgICBjb25zb2xlLmxvZyhcIk1lc3NhZ2UgYWRkZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcbi8vICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbi8vICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWRkaW5nIG1lc3NhZ2U6XCIsIGVycm9yKTtcbi8vICAgICAgICAgfVxuLy8gICAgICAgfTtcbi8vICAgICBmdW5jdGlvbiBoYW5kbGVLZXlEb3duKGV2ZW50KSB7XG4vLyAgICAgICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIilcbi8vICAgICAgICAgICAgIGhhbmRsZVN1Ym1pdCgpO1xuLy8gICAgIH1cblxuLy8gICAgIHJldHVybiAoXG4vLyAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctc2xhdGUtODAwIGZsZXggZmxleC1jb2wgaC1mdWxsIHAtMSBtLTEgcm91bmRlZC1tZFwiPlxuLy8gICAgICAgICAgICAge2NvbnNvbGUubG9nKHByb2Nlc3NlZENoYXRzKX1cbi8vICAgICAgICAgICAgIHtjb25zb2xlLmxvZyhwcm9wcy5jaGF0cyl9XG4vLyAgICAgICAgICAgICA8UHJvZmlsZSBjdXJyRGlzcGxheVVzZXI9e2N1cnJEaXNwbGF5VXNlcn0gLz5cbi8vICAgICAgICAgICAgIHsvKiA8UGVyZmVjdFNjcm9sbGJhcj4gKi99XG4vLyAgICAgICAgICAgICB7LyogPGgxPntwcm9wcy5jdXJyQ2hhdH08L2gxPiAqL31cbi8vICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1ncm93IG92ZXJmbG93LWhpZGRlblwiPlxuLy8gICAgICAgICAgICAgICAgIDxNZXNzYWdlcyBtZXNzYWdlcz17bWVzc2FnZXN9IFxuLy8gICAgICAgICAgICAgICAgIHVzZXJJZD17dXNlcklkfVxuLy8gICAgICAgICAgICAgICAgICAgICBjdXJyQ2hhdD17cHJvcHMuY3VyckNoYXR9XG4vLyAgICAgICAgICAgICAgICAgLz5cbi8vICAgICAgICAgICAgIDwvZGl2PlxuLy8gICAgICAgICAgICAgey8qIDwvUGVyZmVjdFNjcm9sbGJhcj4gICovfVxuLy8gICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtdC1hdXRvIHAtMiBiZy1zbGF0ZS03MDBcIj5cbi8vICAgICAgICAgICAgICAgICA8VGV4dEZpZWxkIFxuLy8gICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1zbGF0ZS0yMDAgcm91bmRlZC1mdWxsIHctZnVsbCBkcm9wLXNoYWRvdy1tZFwiIFxuLy8gICAgICAgICAgICAgICAgICAgICBpZD1cIm91dGxpbmVkLWJhc2ljXCIgXG4vLyAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTWVzc2FnZVwiXG4vLyAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtjdXJyTXNnfVxuLy8gICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZWRcIiBcbi8vICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbi8vICAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXtoYW5kbGVLZXlEb3dufSBcbi8vICAgICAgICAgICAgICAgICAvPlxuLy8gICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYmctZ3JlZW4tNTAwIHJvdW5kZWQtZnVsbCBwLTIgbS0yXCIgb25DbGljaz17aGFuZGxlU3VibWl0fT5cbi8vICAgICAgICAgICAgICAgICAgICAgU2VuZFxuLy8gICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuLy8gICAgICAgICAgICAgPC9kaXY+XG4vLyAgICAgICAgIDwvZGl2PlxuLy8gICAgICk7XG4vLyB9XG5cInVzZSBjbGllbnRcIlxuaW1wb3J0IFJlYWN0LCB7IHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFByb2ZpbGUgZnJvbSBcIi4vcHJvZmlsZS5qc3hcIjtcbmltcG9ydCB7IFVzZXJDb250ZXh0LCB1c2VVc2VyIH0gZnJvbSBcIi4uL3VzZXJDb250ZXh0LmpzeFwiO1xuaW1wb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcIkBtdWkvbWF0ZXJpYWxcIjtcbmltcG9ydCBNZXNzYWdlcyBmcm9tIFwiLi9tZXNzYWdlcy5qc3hcIjtcbmltcG9ydCB7IGRiIH0gZnJvbSBcIi4uL2ZpcmViYXNlLmpzXCI7XG5pbXBvcnQgeyBhcnJheVVuaW9uLCBkb2MsIHVwZGF0ZURvYyB9IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ2hhdChwcm9wcykge1xuICAgIGNvbnN0IHVzZXJDb250ZXh0ID0gdXNlVXNlcigpO1xuICAgIGNvbnN0IHVzZXJJZCA9IHByb3BzLnVzZXJJZDtcbiAgICBjb25zdCBvdGhlclVzZXIgPSBwcm9wcy5vdGhlclVzZXI7XG4gICAgY29uc3QgW2N1cnJNc2csIHNldEN1cnJNc2ddID0gdXNlU3RhdGUoXCJcIik7XG4gICAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZShbXSk7XG4gICAgY29uc3QgW3dzLCBzZXRXc10gPSB1c2VTdGF0ZShudWxsKTsgLy8gV2ViU29ja2V0IGluc3RhbmNlXG4gICAgY29uc3Qgd3NSZWYgPSB1c2VSZWYobnVsbCk7IC8vIFRvIGtlZXAgdHJhY2sgb2YgdGhlIFdlYlNvY2tldCBpbnN0YW5jZVxuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgLy8gRXN0YWJsaXNoIFdlYlNvY2tldCBjb25uZWN0aW9uIHdoZW4gdGhlIGNvbXBvbmVudCBtb3VudHNcbiAgICAgICAgY29uc3Qgc29ja2V0ID0gbmV3IFdlYlNvY2tldChcIndzOi8vbG9jYWxob3N0OjgwODBcIik7XG4gICAgICAgIHdzUmVmLmN1cnJlbnQgPSBzb2NrZXQ7XG4gICAgICAgIHNldFdzKHNvY2tldCk7XG5cbiAgICAgICAgLy8gSGFuZGxlIGluY29taW5nIG1lc3NhZ2VzIGZyb20gdGhlIHNlcnZlclxuICAgICAgICBzb2NrZXQub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgICAgIC8vIEFkZCB0aGUgbmV3IG1lc3NhZ2UgdG8gdGhlIHN0YXRlXG4gICAgICAgICAgICBzZXRNZXNzYWdlcygocHJldk1lc3NhZ2VzKSA9PiBbLi4ucHJldk1lc3NhZ2VzLCBtZXNzYWdlXSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQ2xlYW4gdXAgV2ViU29ja2V0IGNvbm5lY3Rpb24gd2hlbiB0aGUgY29tcG9uZW50IHVubW91bnRzXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAod3NSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIHdzUmVmLmN1cnJlbnQuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LCBbXSk7XG5cbiAgICAvLyBGdW5jdGlvbiB0byBoYW5kbGUgc2VuZGluZyBtZXNzYWdlcyB0aHJvdWdoIFdlYlNvY2tldFxuICAgIGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdCgpIHtcbiAgICAgICAgaWYgKGN1cnJNc2cubGVuZ3RoID4gMCAmJiB3cykge1xuICAgICAgICAgICAgY29uc3QgbmV3TWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgICAgICAgICBjaGF0SWQ6IHByb3BzLmN1cnJDaGF0LFxuICAgICAgICAgICAgICAgIG1zZzogY3Vyck1zZyxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIFNlbmQgbWVzc2FnZSB0byBXZWJTb2NrZXQgc2VydmVyXG4gICAgICAgICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KG5ld01lc3NhZ2UpKTtcblxuICAgICAgICAgICAgLy8gT3B0aW9uYWxseSwgYWRkIHRoZSBtZXNzYWdlIHRvIEZpcmViYXNlIChhc3luY2hyb25vdXMpXG4gICAgICAgICAgICBhZGRNZXNzYWdlVG9DaGF0KHByb3BzLmN1cnJDaGF0LCBjdXJyTXNnLCB1c2VySWQpO1xuXG4gICAgICAgICAgICBzZXRDdXJyTXNnKFwiXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRnVuY3Rpb24gdG8gc3RvcmUgdGhlIG1lc3NhZ2UgaW4gRmlyZWJhc2VcbiAgICBhc3luYyBmdW5jdGlvbiBhZGRNZXNzYWdlVG9DaGF0KGNoYXRJZCwgbWVzc2FnZVRleHQsIHNlbmRlcklkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjaGF0UmVmID0gZG9jKGRiLCBcIkNoYXRzXCIsIGNoYXRJZCk7XG4gICAgICAgICAgICBjb25zdCBuZXdNZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgIHNlbmRlcjogc2VuZGVySWQsXG4gICAgICAgICAgICAgICAgbXNnOiBtZXNzYWdlVGV4dCxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBhd2FpdCB1cGRhdGVEb2MoY2hhdFJlZiwge1xuICAgICAgICAgICAgICAgIGNoYXQ6IGFycmF5VW5pb24obmV3TWVzc2FnZSksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJNZXNzYWdlIHN0b3JlZCBpbiBGaXJlYmFzZSFcIik7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWRkaW5nIG1lc3NhZ2UgdG8gRmlyZWJhc2U6XCIsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZUNoYW5nZShldmVudCkge1xuICAgICAgICBzZXRDdXJyTXNnKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaGF0LWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPFByb2ZpbGUgY3VyckRpc3BsYXlVc2VyPXtvdGhlclVzZXJ9IC8+XG4gICAgICAgICAgICA8TWVzc2FnZXMgbWVzc2FnZXM9e21lc3NhZ2VzfSB1c2VySWQ9e3VzZXJJZH0gY3VyckNoYXQ9e3Byb3BzLmN1cnJDaGF0fSAvPlxuICAgICAgICAgICAgPFRleHRGaWVsZFxuICAgICAgICAgICAgICAgIHZhbHVlPXtjdXJyTXNnfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgb25LZXlEb3duPXsoZSkgPT4gZS5rZXkgPT09IFwiRW50ZXJcIiAmJiBoYW5kbGVTdWJtaXQoKX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlR5cGUgeW91ciBtZXNzYWdlLi4uXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZVN1Ym1pdH0+U2VuZDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufVxuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlQ29udGV4dCIsInVzZUVmZmVjdCIsInVzZVN0YXRlIiwidXNlUmVmIiwiUHJvZmlsZSIsIlVzZXJDb250ZXh0IiwidXNlVXNlciIsIlRleHRGaWVsZCIsIk1lc3NhZ2VzIiwiZGIiLCJhcnJheVVuaW9uIiwiZG9jIiwidXBkYXRlRG9jIiwiQ2hhdCIsInByb3BzIiwidXNlckNvbnRleHQiLCJ1c2VySWQiLCJvdGhlclVzZXIiLCJjdXJyTXNnIiwic2V0Q3Vyck1zZyIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJ3cyIsInNldFdzIiwid3NSZWYiLCJzb2NrZXQiLCJXZWJTb2NrZXQiLCJjdXJyZW50Iiwib25tZXNzYWdlIiwiZXZlbnQiLCJtZXNzYWdlIiwiSlNPTiIsInBhcnNlIiwiZGF0YSIsInByZXZNZXNzYWdlcyIsImNsb3NlIiwiaGFuZGxlU3VibWl0IiwibGVuZ3RoIiwibmV3TWVzc2FnZSIsImNoYXRJZCIsImN1cnJDaGF0IiwibXNnIiwic2VuZCIsInN0cmluZ2lmeSIsImFkZE1lc3NhZ2VUb0NoYXQiLCJtZXNzYWdlVGV4dCIsInNlbmRlcklkIiwiY2hhdFJlZiIsInNlbmRlciIsInRpbWVzdGFtcCIsIkRhdGUiLCJjaGF0IiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiaGFuZGxlQ2hhbmdlIiwidGFyZ2V0IiwidmFsdWUiLCJkaXYiLCJjbGFzc05hbWUiLCJjdXJyRGlzcGxheVVzZXIiLCJvbkNoYW5nZSIsIm9uS2V5RG93biIsImUiLCJrZXkiLCJwbGFjZWhvbGRlciIsImJ1dHRvbiIsIm9uQ2xpY2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/components/chat.jsx\n"));

/***/ })

});